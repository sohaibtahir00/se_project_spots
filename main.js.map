{"version":3,"file":"main.js","mappings":"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","sources":["webpack://se_project_spots/./src/scripts/validation.js","webpack://se_project_spots/./src/utils/Api.js","webpack://se_project_spots/./src/pages/index.js"],"sourcesContent":["export const settings = {\n    formSelector: \".modal__container-form\",\n    inputSelector: \".modal__input\",\n    submitButtonSelector: \".modal__submit-button\",\n    inactiveButtonClass: \"modal__container-form_error\",\n    inputErrorClass: \"modal__input_type_error\",\n    errorClass: \"modal__error\",\n    errorMsgSuffix: \"-error\"\n  }\n\nconst showInputError = (formEl, inputEl, errorMsg, config) => {\n    const errorMsgId = inputEl.id + settings.errorMsgSuffix;\n    const errorMsgEl = formEl.querySelector(\"#\" + errorMsgId);\n    errorMsgEl.textContent = errorMsg;\n    inputEl.classList.add(config.inputErrorClass);\n};\n\nconst hideInputError = (formEl, inputEl, config) => {\n    const errorMsgId = inputEl.id + config.errorMsgSuffix;\n    const errorMsgEl = formEl.querySelector(\"#\" + errorMsgId);\n    errorMsgEl.textContent = \"\";\n    inputEl.classList.remove(config.inputErrorClass);\n};\n\nconst checkInputValidity = (formEl, inputEl, config) => {\n    console.log(inputEl.validationMessage);\n    if (!inputEl.validity.valid) {\n        showInputError(formEl, inputEl, inputEl.validationMessage, config);\n    } else {\n        hideInputError(formEl, inputEl, config);\n    }\n};\n\nconst hasInvalidInput = (inputList) => {\n    return inputList.some((input) => {\n        return !input.validity.valid;\n    });\n};\n\nconst toggleButtonState = (inputList, buttonEl, config) => {\n    if (hasInvalidInput(inputList)) {\n        disabledButton(buttonEl, config);\n    } else {\n        buttonEl.disabled = false;\n        buttonEl.classList.remove(config.inactiveButtonClass);\n    }\n};\n\nexport const disabledButton = (buttonEl, config) => {\n    buttonEl.disabled = true;\n    buttonEl.classList.add(config.inactiveButtonClass);\n};\n\nexport const resetValidation = (formEl, inputList, config) => {\n    inputList.forEach((inputEl) => {\n        hideInputError(formEl, inputEl, config);\n    });\n};\n\nconst setEventListeners = (formEl, config) => {\n    const inputList = Array.from(formEl.querySelectorAll(config.inputSelector));\n    const buttonEl = formEl.querySelector(config.submitButtonSelector);\n    \n    toggleButtonState(inputList, buttonEl, config);\n    inputList.forEach((inputEl) => {\n        inputEl.addEventListener(\"input\", function () {\n            checkInputValidity(formEl, inputEl, config);\n            toggleButtonState(inputList, buttonEl, config);\n        });\n    });\n};\n\nexport const enableValidation = (config) => {\n    const formList = document.querySelectorAll(config.formSelector);\n    formList.forEach((formEl) => {\n        setEventListeners(formEl, config);\n    });\n};","function checkResponse(res) {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Error: ${res.status}`);\r\n}\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers, userBaseUrl }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n    this._userBaseUrl = userBaseUrl; \r\n  }\r\n\r\n  getUserInfo() {\r\n    return fetch(`${this._userBaseUrl}/users/me`, {\r\n      headers: this._headers,\r\n    }).then(checkResponse);\r\n  }\r\n\r\n  getAppInfo() {\r\n    return Promise.all([this.getUserInfo(), this.getInitialCards()]);\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: this._headers,\r\n    }).then(checkResponse);\r\n  }\r\n  \r\n  addCard({ name, link }) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        ...this._headers,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        link,\r\n      }),\r\n    }).then(checkResponse);\r\n  }\r\n\r\n\r\n  editUserInfo({ name, about, }) {\r\n    return fetch(`${this._userBaseUrl}/users/me`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        ...this._headers,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        name,\r\n        about,\r\n      }),\r\n    }).then(checkResponse);\r\n  }\r\n\r\n  editAvatarInfo(avatar) {\r\n    return fetch(`${this._userBaseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: {\r\n        ...this._headers,\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        avatar,\r\n      }),\r\n    }).then(checkResponse);\r\n  }\r\n\r\n  changeLikeStatus(id, isLiked) {\r\n    return fetch(`${this._userBaseUrl}/cards/${id}/likes`, {\r\n      method: isLiked ? \"DELETE\" : \"PUT\",\r\n      headers: {\r\n        ...this._headers,\r\n        'Content-Type': 'application/json',\r\n      },\r\n    }).then(checkResponse);\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._userBaseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(checkResponse);\r\n  }\r\n\r\n}\r\n\r\nexport default Api;\r\n","import \"./index.css\"\r\nimport { enableValidation, settings, resetValidation, disabledButton } from \"../scripts/validation.js\";\r\nimport Api from \"../utils/Api.js\"\r\n\r\n// const initialCards = [\r\n//     {name: \"Val Thorens\", link: \"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg\"},\r\n//     {name: \"Restaurant terrace\", link: \"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg\"},\r\n//     {name: \"An outdoor cafe\", link: \"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg\"},\r\n//     {name: \"A very long bridge, over the forest and through the trees\", link: \"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg\"},\r\n//     {name: \"Tunnel with morning light\", link: \"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg\"},\r\n//     {name: \"Mountain house\", link: \"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg\"},\r\n// ];\r\n\r\nconst api = new Api({\r\n    baseUrl: \"https://around-api.en.tripleten-services.com/v1\",\r\n    headers: {\r\n      authorization: \"f54cc228-1565-4d98-b6d9-1ca0cd800e7c\",\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    userBaseUrl: 'https://around-api.en.tripleten-services.com/v1'\r\n  });\r\n\r\n  api.getAppInfo()\r\n  .then(([userData, cards]) => {\r\n      profileName.textContent = userData.name;\r\n      profileDescription.textContent = userData.about;\r\n      profileAvatar.src = userData.avatar;\r\n      cards.forEach((item) => {\r\n          const cardElement = getCardElement(item);\r\n          cardsList.prepend(cardElement);\r\n      });\r\n  })\r\n  .catch(console.error);\r\n        \r\n\r\n// EditModal\r\nconst editModalButton = document.querySelector(\".profile__edit-button\");\r\nconst editModal = document.querySelector(\"#edit-profile-modal\");\r\nconst editModalCloseButton = document.querySelector(\".modal__close-button\");\r\nconst editModalNameInput = editModal.querySelector(\"#profile-name-input\");\r\nconst profileName = document.querySelector(\".profile__name\");\r\nconst profileDescription = document.querySelector(\".profile__description\");\r\nconst editModalDescriptionInput = editModal.querySelector(\"#profile-description-input\");\r\nconst editForm = editModal.querySelector(\".modal__container-form\");\r\n\r\n//CardModal\r\nconst cardModalButton = document.querySelector(\".profile__add-button\");\r\nconst closeProfileModal = document.querySelector(\"#close-modal-button\");\r\nconst cardsList = document.querySelector(\".cards__list\");\r\nconst cardTemplate = document.querySelector(\"#card-template\");\r\nconst cardModal = document.querySelector(\"#add-card-modal\");\r\nconst cardModalCloseButton = cardModal.querySelector(\".modal__close-button\");\r\nconst modalSubmitButton = cardModal.querySelector(\".modal__submit-button\");\r\nconst cardForm = cardModal.querySelector(\".modal__container-form\");\r\nconst cardNameInput = cardModal.querySelector(\"#add-card-name-input\");\r\nconst cardLinkInput = cardModal.querySelector(\"#add-card-link-input\");\r\n\r\n//PreviewModal\r\nconst previewModal = document.querySelector(\"#preview-modal\");\r\nconst previewModalImageElement = previewModal.querySelector(\".modal__image\");\r\nconst previewModalCaptionElement = previewModal.querySelector(\".modal__caption\");\r\nconst previewModalCloseButton = previewModal.querySelector(\".modal__close-type-preview\");\r\nconst modals = document.querySelectorAll(\".modal\");\r\n\r\n//AvatarModal\r\nconst avatarModal = document.querySelector(\"#avatar-modal\");\r\nconst avatarModalButton = document.querySelector(\".profile__avatar-button\");\r\nconst avatarForm = avatarModal.querySelector(\".modal__container-form\");\r\nconst avatarModalCloseButton = avatarModal.querySelector(\".modal__close-button\");\r\nconst avatarSubmitButton = avatarModal.querySelector(\".modal__submit-button\");\r\nconst avatarInput = avatarModal.querySelector(\"#profile-avatar-input\");\r\nconst profileAvatar = document.querySelector(\".profile__avatar\");\r\n\r\n//DeleteModal\r\nconst deleteModal = document.querySelector(\"#delete-modal\");\r\nconst deleteButtonsContainer = deleteModal.querySelector(\".delete__buttons-container\")\r\nconst deleteForm = document.querySelector(\".modal__delete-form\");\r\nconst closeDeleteModal = document.querySelector(\".modal__delete-close-button-img\")\r\nconst cancelDeleteModal = document.querySelector(\".modal__cancel-button\")\r\nconst deleteButton = deleteForm.querySelector(\"#modal__delete-button\");\r\n\r\nlet selectedCard, selectedCardId;\r\n\r\nmodals.forEach(modal => {\r\n    modal.addEventListener(\"click\", (event) => {\r\n        if (event.target.classList.contains(\"modal_opened\")) {\r\n            closeModal(modal);\r\n        }\r\n    });\r\n});\r\n\r\nfunction handleDeleteSubmit(evt) {\r\n    const deleteButton = evt.submitter;\r\n    deleteButton.textContent = \"Deleting...\";\r\n    evt.preventDefault();\r\n    api.deleteCard(selectedCardId)\r\n        .then(() => {\r\n            selectedCard.remove(); \r\n            closeModal(deleteModal); \r\n        })\r\n        .catch(console.error)\r\n        .finally(() => {\r\n            deleteButton.textContent = \"Delete\";\r\n        });\r\n}\r\n\r\nfunction handleDeleteCard(cardElement, cardId) {\r\n    selectedCard = cardElement;\r\n    selectedCardId = cardId;\r\n    openModal(deleteModal);\r\n}\r\n\r\nfunction handleProfileFormSubmit(evt) {\r\n    const modalSubmitButton = evt.submitter;\r\n    modalSubmitButton.textContent = \"Saving...\"\r\n    evt.preventDefault();\r\n    api.editUserInfo({ name: editModalNameInput.value, about: editModalDescriptionInput.value })\r\n        .then((data) => {\r\n            profileName.textContent = data.name;\r\n            profileDescription.textContent = data.about;\r\n            closeModal(editModal);\r\n        })\r\n        .catch(console.error)\r\n        .finally(() => {\r\n            modalSubmitButton.textContent = \"Save\";\r\n        });\r\n}\r\n\r\nfunction handleAddCardSubmit(evt) {\r\n        const modalSubmitButton = evt.submitter;\r\n        modalSubmitButton.textContent = \"Saving...\"\r\n        evt.preventDefault();\r\n        const inputValues = { name: cardNameInput.value, link: cardLinkInput.value };\r\n        api.addCard(inputValues)\r\n            .then((data) => {\r\n                const cardElement = getCardElement(data);\r\n                cardsList.prepend(cardElement);\r\n                disabledButton(modalSubmitButton, settings);\r\n                closeModal(cardModal);\r\n                cardNameInput.value = \"\";\r\n                cardLinkInput.value = \"\";\r\n            })\r\n            .catch(console.error)\r\n            .finally(() => {\r\n                modalSubmitButton.textContent = \"Save\";\r\n        });\r\n    }\r\n            \r\n    function handleAvatarSubmit(evt) {\r\n        const modalSubmitButton = evt.submitter;\r\n        modalSubmitButton.textContent = \"Saving...\";\r\n        evt.preventDefault();\r\n        api.editAvatarInfo(avatarInput.value)\r\n            .then((data) => {\r\n                profileAvatar.src = data.avatar;\r\n                disabledButton(modalSubmitButton, settings);\r\n                closeModal(avatarModal);\r\n                avatarInput.value = \"\";\r\n            })\r\n            .catch(console.error)\r\n            .finally(() => {\r\n                modalSubmitButton.textContent = \"Save\";\r\n            });\r\n    }\r\n\r\nfunction openModal(modal, config) {\r\n    modal.classList.add(\"modal_opened\");\r\n    document.addEventListener(\"keydown\", handleEscapeKey);\r\n}\r\n\r\nfunction closeModal(modal, config) {\r\n    modal.classList.remove(\"modal_opened\");\r\n    document.removeEventListener(\"keydown\", handleEscapeKey);\r\n}\r\n\r\nfunction handleEscapeKey(event) {\r\n    if (event.key === \"Escape\") {\r\n        modals.forEach(modal => {\r\n            if (modal.classList.contains(\"modal_opened\")) {\r\n                closeModal(modal);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\neditModalButton.addEventListener(\"click\", () => {\r\n    editModalNameInput.value = profileName.textContent;\r\n    editModalDescriptionInput.value = profileDescription.textContent;\r\n    resetValidation(editForm, [editModalNameInput, editModalDescriptionInput], settings);\r\n    openModal(editModal);\r\n});\r\n\r\neditModalCloseButton.addEventListener(\"click\", () => {\r\n    closeModal(editModal);\r\n});\r\n\r\ncardModalButton.addEventListener(\"click\", () => {\r\n    openModal(cardModal);\r\n});\r\n\r\ncardModalCloseButton.addEventListener(\"click\", () => {\r\n    closeModal(cardModal);\r\n});\r\n\r\n\r\npreviewModalCloseButton.addEventListener(\"click\", () => {\r\n    closeModal(previewModal);\r\n});\r\n\r\navatarModalButton.addEventListener(\"click\", () => {\r\n    openModal(avatarModal);\r\n});\r\n\r\navatarModalCloseButton.addEventListener(\"click\", () => {\r\n    closeModal(avatarModal);\r\n});\r\n\r\ncloseDeleteModal.addEventListener(\"click\", () => {\r\n    closeModal(deleteModal);\r\n});\r\n\r\ncancelDeleteModal.addEventListener(\"click\", () => {\r\n    closeModal(deleteModal);\r\n});\r\n\r\neditForm.addEventListener(\"submit\", handleProfileFormSubmit);\r\ncardForm.addEventListener(\"submit\", handleAddCardSubmit);\r\navatarForm.addEventListener(\"submit\", handleAvatarSubmit);\r\ndeleteForm.addEventListener(\"submit\", handleDeleteSubmit);\r\n\r\nfunction handleLike(evt, cardId) {\r\n    const likeButton = evt.target;\r\n    const isLiked = likeButton.classList.contains(\"card__like-button_liked\");\r\n\r\n    api.changeLikeStatus(cardId, isLiked)\r\n        .then((data) => {\r\n            likeButton.classList.toggle(\"card__like-button_liked\", !isLiked);\r\n        })\r\n        .catch(console.error);\r\n}\r\n\r\n\r\n\r\nfunction getCardElement(data) {\r\n    const cardElement = cardTemplate.content.querySelector(\".card\").cloneNode(true);\r\n    const cardNameElement = cardElement.querySelector(\".card__title\");\r\n    const cardImageElement = cardElement.querySelector(\".card__image\");\r\n    const cardLikeButton = cardElement.querySelector(\".card__like-button\");\r\n    const cardDeleteButton = cardElement.querySelector(\".card__delete-button\");\r\n\r\n    cardNameElement.textContent = data.name;\r\n    cardImageElement.alt = data.name;\r\n    cardImageElement.src = data.link;\r\n\r\n    \r\n    if (data.isLiked) { \r\n        cardLikeButton.classList.add(\"card__like-button_liked\");\r\n    } else {\r\n        cardLikeButton.classList.remove(\"card__like-button_liked\");\r\n    }\r\n\r\n    cardLikeButton.addEventListener(\"click\", (evt) => handleLike(evt, data._id));\r\n\r\n    cardImageElement.addEventListener(\"click\", () => {\r\n        openModal(previewModal);\r\n        previewModalImageElement.src = data.link;\r\n        previewModalImageElement.alt = data.name;\r\n        previewModalCaptionElement.textContent = data.name;\r\n    });\r\n\r\n    cardDeleteButton.addEventListener(\"click\", () => handleDeleteCard(cardElement, data._id));\r\n\r\n    deleteForm.addEventListener(\"submit\", handleDeleteSubmit);\r\n\r\n    return cardElement;\r\n}\r\n\r\n\r\n\r\nenableValidation(settings);"],"names":["settings","formSelector","inputSelector","submitButtonSelector","inactiveButtonClass","inputErrorClass","errorClass","errorMsgSuffix","hideInputError","formEl","inputEl","config","errorMsgId","id","querySelector","textContent","classList","remove","toggleButtonState","inputList","buttonEl","some","input","validity","valid","hasInvalidInput","disabledButton","disabled","add","checkResponse","res","ok","json","Promise","reject","status","api","constructor","_ref","baseUrl","headers","userBaseUrl","this","_baseUrl","_headers","_userBaseUrl","getUserInfo","fetch","then","getAppInfo","all","getInitialCards","addCard","_ref2","name","link","method","body","JSON","stringify","editUserInfo","_ref3","about","editAvatarInfo","avatar","changeLikeStatus","isLiked","deleteCard","authorization","userData","cards","profileName","profileDescription","profileAvatar","src","forEach","item","cardElement","getCardElement","cardsList","prepend","catch","console","error","editModalButton","document","editModal","editModalCloseButton","editModalNameInput","editModalDescriptionInput","editForm","cardModalButton","cardTemplate","cardModal","cardModalCloseButton","cardForm","cardNameInput","cardLinkInput","previewModal","previewModalImageElement","previewModalCaptionElement","previewModalCloseButton","modals","querySelectorAll","avatarModal","avatarModalButton","avatarForm","avatarModalCloseButton","avatarInput","deleteModal","deleteForm","closeDeleteModal","cancelDeleteModal","selectedCard","selectedCardId","handleDeleteSubmit","evt","deleteButton","submitter","preventDefault","closeModal","finally","openModal","modal","addEventListener","handleEscapeKey","removeEventListener","event","key","contains","data","content","cloneNode","cardNameElement","cardImageElement","cardLikeButton","cardDeleteButton","alt","cardId","likeButton","target","toggle","handleLike","_id","handleDeleteCard","resetValidation","value","modalSubmitButton","inputValues","setEventListeners","Array","from","checkInputValidity","log","validationMessage","showInputError","errorMsg"],"sourceRoot":""}